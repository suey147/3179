<!DOCTYPE html>
<html>
<head>
  <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <!-- CSS file -->
  <link rel="stylesheet" type="text/css" href="css/styles.css" media="all">

    <!-- Import pure.css -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<body>
  <div class="page">
    <h1>AI Index</h1>
    <p style="font-size:150%; padding: 20px;">In our rapidly evolving world, Artificial Intelligence (AI) has emerged as a driving force behind economic growth and innovation. 
        This global AI race has captivated nations, pushing them to the forefront of technology and economic development. 
        To navigate this landscape effectively, it's crucial to identify the countries leading the charge in AI progress.</p>
    <p>
        The data delves into seven vital categories, forming the bedrock of AI advancements. 
        These categories are meticulously split into three fundamental pillars: Implementation, Innovation, and Investment. 
        Within these pillars, 62 countries have been closely examined, shedding light on their unique contributions to the AI landscape.
    </p>
    <hr class="hr3">
    <h2>Gobal AI Index</h2>
      <!-- pure grid group -->
      <div class="pure-g">
        <div class="pure-u-1-1">
          <div id="slider">
            <div id="oldchildslider"></div>
          </div>
          <div id="map" style="width: 100%;"></div>
        </div>
    </div>
    <!-- end pure grid group -->
    <br>
    <!-- end pure grid group -->
    <hr class="hr3">
    <h2>Country</h2>    
      <!-- pure grid group -->
      <div class="pure-g">
        <div class="pure-u-1-2">
            <div id="radar"></div>
          </div>
          <div class="pure-u-1-2">
            <p >Radar chart of AI score</p>
            <p>Infrastructure, Operating Environment, research...</p>
          </div>
        
    </div>
    <!-- end pure grid group -->
    <br>

    <!-- end pure grid group -->
    <hr class="hr3">
    <h2>relationship</h2>
      <!-- pure grid group -->
      <div class="pure-g">
        <div class="pure-u-1-1">
          <div id="Alluvial" style="width: 100%;"></div>
        </div>
    </div>
    <!-- end pure grid group -->
    <br>

    <hr class="hr3">
    <h2>AI Implementation</h2>
      <!-- pure grid group -->
      <div class="pure-g">
        <div class="pure-u-1-2">
            <p >Radar chart of AI score</p>
            <p>Infrastructure, Operating Environment, research...</p>
          </div>
        <div class="pure-u-1-2">
          <div id="implementation" style="width: 100%;"></div>
        </div>
    </div>
    <!-- end pure grid group -->
    <br>

    <hr class="hr3">
    <h2>AI Innovation</h2>
      <!-- pure grid group -->
      <div class="pure-g">
        <div class="pure-u-1-2">
            <div id="Innovation" style="width: 100%;"></div>
          </div>
        <div class="pure-u-1-2">
            <p >Radar chart of AI score</p>
            <p>Infrastructure, Operating Environment, research...</p>
          </div>
    </div>
    <!-- end pure grid group -->
    <br>

    <hr class="hr3">
    <h2>AI Investment</h2>
      <!-- pure grid group -->
      <div class="pure-g">
        <div class="pure-u-1-2">
            <p >Radar chart of AI score</p>
            <p>Infrastructure, Operating Environment, research...</p>
          </div>        
        <div class="pure-u-1-2">
            <div id="Investment" style="width: 100%;"></div>
          </div>

    </div>
    <!-- end pure grid group -->
    <br>

    <!-- end pure grid group -->
    <hr class="hr3">
    <h2>Ranking</h2>
        <!-- pure grid group -->
        <div class="pure-g">
        <div class="pure-u-1-1">
            <div id="top_10"></div>
        </div>
    </div>
    <!-- end pure grid group -->
    <br>

  </div>
  


<script type="text/javascript">
var spec = "js/map_radial.vg.json"
var spec2 = "js/map.vg.json";
var spec3 = "js/radar.vg.json";
var spec4 = "js/Alluvial.vg.json";
var top_10 = "js/top_10.vg.json";
var imple = "js/implementation.vg.json";
var inno = "js/innovation.vg.json";
var invest = "js/investment.vg.json";
var tooltipOptions = {
    formatTooltip: (datum, sanitize) => {
      console.log(datum)
        if (datum["image url"]) {
            // If the datum has an image URL field
            var imageUrl = sanitize(datum["image url"]); // Assuming datum.image_url contains the URL of the image
            return `Country: ${datum["Country"]}<br> Total Score: ${datum["Total score"]}<br><img src="${imageUrl}" alt="Image" style="max-width: 100px; max-height: 100px;">.`;
        } else {
            // If there is no image URL field, show a default tooltip
            return `My failed custom tooltip and ${sanitize(datum.field)}.`;
        }
    }
    };
    vegaEmbed('#map', spec).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
      const sliders = document.getElementsByClassName('vega-bindings'); 
      const newparent = document.getElementById('slider');  
      const oldchild = document.getElementById("oldchildslider");  
      newparent.replaceChild(sliders[0], oldchild);
      vegaEmbed('#radar', spec3).then(function(result2) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            result.view.addEventListener('click', function (event, item){
                function _isContains(json, value) {
                    let contains = false;
                    Object.keys(json).some(key => {
                        contains = typeof json[key].Country === 'object' ? _isContains(json[key].Country, value) : json[key].Country === value;
                        return contains;
                    });
                    return contains;
                }
                var isValid = false;
                $.getJSON("https://raw.githubusercontent.com/suey147/3179/main/data/AI_index_db.json", function(data) {
                    isValid = _isContains(data,item.datum.Country );
                    if (isValid == true){
                    result2.view.signal('pts', item.datum.Country).run()
                    console.log(item);
                    }
                });
            

            })
        }).catch(console.error);



    }).catch(console.error);
    

    vegaEmbed('#Alluvial', spec4).then(function(result2) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            
    }).catch(console.error);

    vegaEmbed('#top_10', top_10).then(function(result2) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            
    }).catch(console.error);

    vegaEmbed('#implementation', imple).then(function(result2) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            
    }).catch(console.error);

    vegaEmbed('#Innovation', inno).then(function(result2) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            
    }).catch(console.error);

    vegaEmbed('#Investment', invest).then(function(result2) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            
    }).catch(console.error);
</script>

</body>
</html>